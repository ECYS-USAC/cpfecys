{{extend 'template.html'}}
<!-- Additional Scripts for MARKMIN -->
<script src="http://code.jquery.com/jquery-migrate-1.2.1.js"></script>
<script type="text/javascript" src="{{=URL('static','markitup')}}/jquery.markitup.pack.js"></script>
<script type="text/javascript" src="{{=URL('static','markitup')}}/sets/markmin/set.js"></script>
<script type="text/javascript" src="{{=URL('static','js')}}/highcharts/js/highcharts.js"></script>
<script type="text/javascript" src="{{=URL('static','js')}}/highcharts/js/modules/data.js"></script>
<script type="text/javascript" src="{{=URL('static','js')}}/highcharts/js/modules/exporting.js"></script>
<link rel="stylesheet" type="text/css" href="{{=URL('static','markitup')}}/skins/markitup/style.css"/>
<link rel="stylesheet" type="text/css" href="{{=URL('static','markitup')}}/sets/markmin/style.css"/>
<!-- //Additional Scripts for MARKMIN -->
<div class="row-fluid container" style="overflow:auto; width:100%;">
    <!--REPORT CONTENTS-->
    	<div>
    	<!--HEADER OF REPORT-->
	    	{{if request.vars['level'] is not None and str(request.vars['level'])!="1":}}
	    	<div class="pull-left noPrint">
	    		<a style="white-space:nowrap; cursor:pointer; align:right;" class="btn" onclick="levelUP();">
	    			<span class="icon-black icon-arrow-up"></span><b>{{=T('Level Up')}}</b>
	    		</a>
	    	</div>
	    	{{pass}}
	    	<div class="pull-right">
	    		<a onclick="exportCSV();"><img src="{{=URL('static','images')}}/icono_CSV.png"></a>
	    	</div>
	    	<center><h1>{{=T('Report Summary')}}</h1></center>
	    	<hr>
	    	<img class="pull-right" src="{{=URL('static','images')}}/escudo.png">
			<center><strong>Universidad de San Carlos de Guatemala</strong><br/>
			<strong>Facultad de Ingeniería</strong><br/>
			<strong>Escuela de Ciencias y Sistemas</strong></center><br/>
			<strong>{{=T('Type')}}: </strong> {{=T('Performance of students')}}<br/>
			<strong>{{=T('Description')}}: </strong> {{=T('Report on the overview of the courses registered in the system.')}}<br/>
			<strong>{{=T('Period')}}: </strong> {{=T(period.period.name)}}-{{=period.yearp}}
    	<!--HEADER OF REPORT-->
    	{{if request.vars['level'] is None or str(request.vars['level'])=="1":}}
    		<form class="form-inline" action="{{=URL('school_reports','general_information')}}" method='get'>
				<select name="period">
				{{for period_I in groupPeriods:}}
					{{if str(period_I.id) == str(period.id):}}
						{{var_sel="selected='selected'"}}
					{{else:}}
						{{var_sel=''}}
					{{pass}}
				  <option value="{{=period_I.id}}" {{=var_sel}}>
				  {{=T(period_I.period.name)}}-{{=period_I.yearp}}
				  </option>
				{{pass}}
				</select>
				<input class="btn" type="submit" value="{{=T('Go')}}">
			</form>
			<div>
				<table class="pull-right table-striped table-bordered">
		  			<tr>
		  				<th colspan="3"><center>FILTRAR CURSOS</center></th>
		  			</tr>
					<tr>
						<td>
							<a style="cursor:pointer;" onclick="visible_C(1);" title="Mostrar todos los cursos">
								<span class="label label-info">Todos</span>
	                    	</a>
						</td>
						<td>
							
							<a style="cursor:pointer;" onclick="visible_C(2);" title="Mostrar cursos activos">
	                    		<span class="label label-success">Activos</span>
	                    	</a>
						</td>
						<td>
							<a style="cursor:pointer;" onclick="visible_C(3);" title="Mostrar cursos inactivos">
	                    		<span class="label label-inverse">Inactivos</span>
	                    	</a>
						</td>
					</tr>
				</table><br/><br/><br/>
		  		<hr>
		  	</div>
		  	<!--REPORT IN TABLE-->
		  		
				<table class="table table-striped table-bordered">
					<tr>
						<th>Curso</th>
						<th><center>Catedraticos Activos</center></th>
						<th><center>Tutores Academicos Activos</center></th>
						<th><center>Estado de Curso</center></th>
					</tr>
					{{for project in infoLevel:}}
						{{if project[2]>0 or project[3]>0:}}
							<tr class="course_active">
						{{else:}}
							<tr class="course_inactive">
						{{pass}}
							<td>{{=project[1]}}</td>
							<td><center>{{=project[2]}}</center></td>
							<td><center>{{=project[3]}}</center></td>
							<td><center>
								{{if project[2]>0 or project[3]>0:}}
									<a style="cursor:pointer;" onclick="next_Level({{=project[0]}});" title="Ir al curso">
										<span class="label label-success">Activo</span>
									</a>
								{{else:}}
									<span class="label label-inverse">Inactivo</span>
								{{pass}}
							</center></td>
						</tr>
					{{pass}}
				</table>
			<!--REPORT IN TABLE-->
		{{elif str(request.vars['level'])=="2":}}
			<br/><strong>{{=T('Course')}}: </strong> {{=project.name}}<br/><br/>
			<table class="table table-striped table-bordered">
				<tr>
					<TH><center>Información del curso</center></TH>
				</tr>
			</table>
		{{pass}}
    	</div>
	<!--REPORT CONTENTS-->    
</div>

<script type="text/javascript">
	{{if request.vars['level'] is None or str(request.vars['level'])=="1":}}
		function visible_C(id){
			if (id==1){
				$(".course_active").css("display", "");
				$(".course_inactive").css("display", "");
			}else{
				if (id==2){
					$(".course_active").css("display", "");
					$(".course_inactive").css("display", "none");
				}else{
					$(".course_active").css("display", "none");
					$(".course_inactive").css("display", "");
				}
			}
		}

		function next_Level(id){
			window.location.href = "{{=URL('school_reports', 'general_information')}}?level=2&amp;period={{=period.id}}&amp;project="+id;
		}
	{{pass}}
</script>