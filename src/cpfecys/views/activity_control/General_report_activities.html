{{extend 'template.html'}}
{{exception_query = db(db.course_laboratory_exception.project == project.id).select().first()}}
{{exception_s_var = False}}
{{exception_t_var = False}}
{{no_menu=True}}

{{if exception_query is not None:}}
    {{exception_t_var = exception_query.t_edit_lab}}
    {{exception_s_var = exception_query.s_edit_course}}
{{pass}}

{{activityPermition=db((db.course_requirement.semester==year.id)&(db.course_requirement.project==project.id)&(db.course_requirement.teacher_permition==True)).count()}}
{{if request.vars['type'] == 'class' and (auth.has_membership('Ecys-Administrator') or auth.has_membership('Super-Administrator') or auth.has_membership('Teacher') or (auth.has_membership('Student') and exception_s_var == True)):}}
    {{no_menu=False}}
{{pass}}

<div id="asP">
</div>
<div class="row-fluid">
    <div class="well span12"  style="overflow:auto;">
        <a href="{{=URL('activity_control', 'students_control', vars=dict(project = project.id, period = year.id))}}" class="btn" ><i class="icon-arrow-left"></i> {{=T('Back')}}</a>
        <div align="right">

            {{if (no_menu==False or (request.vars['type'] == 'class' and auth.has_membership('Student') and activityPermition>0)) and cpfecys.current_year_period().id == year.id:}}
                <a class="btn btn-primary" href="{{=URL('activity_control', 'course_requirement',vars=dict(project = request.vars['project'], period = request.vars['period']))}}">
                    <span class="icon-black icon-edit"></span>
                    {{=T('Course requirement')}}
                </a>
            {{elif (auth.has_membership('Ecys-Administrator') or auth.has_membership('Super-Administrator')):}}
                <a class="btn btn-primary" href="{{=URL('activity_control', 'course_requirement',vars=dict(project = request.vars['project'], period = request.vars['period']))}}">
                    <span class="icon-black icon-edit"></span>
                    {{=T('Course requirement')}}
                </a>
            {{pass}}
            {{if (auth.has_membership('Super-Administrator') or auth.has_membership('Ecys-Administrator') or auth.has_membership('Teacher') or auth.has_membership('Student')):}}
                <a class="btn btn-success" href="{{=URL(vars=dict(project = project.id, period = year.id, list='True', type=request.vars['type']))}}"><i class="icon-download icon-white"></i>{{=T('Export Report')}} (CSV)</a>
            {{pass}}
            {{if no_menu==False:}}
                <a class="btn btn-warning" onclick="click_botton();"><i class="icon-warning-sign icon-white"></i>{{=T('Generate Document')}}<br>{{=T('Format Technical School')}} (CSV)</a>
            {{pass}}
        </div>
        <table>
            <tr>
                <td colspan="4">
                    <b>{{=T('General Report of Activities')}}
                        {{if request.vars['type'] == 'class':}}
                            - {{=T('Course')}}
                        {{else:}}
                            - {{=T('Laboratory')}}
                        {{pass}}
                    </b>
                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <b>{{=T('General Course Data')}}</b>
                </td>
            </tr>
            <tr>
                <td><b>{{=T('Course')}}</b></td>
                <td>{{=project.name}}</td>
            
                <td><b>{{=T('Semester')}}</b></td>
                <td>{{=T(year.period.name)}} {{=str(year.yearp)}}</td>
            </tr>
            <tr>
                <td><b>{{=T('Teacher')}}</b></td>
                {{if teacher is not None:}}
                    <td>{{=str(teacher.auth_user.first_name)}} {{=str(teacher.auth_user.last_name)}}</td>
                {{else:}}
                    <td>{{=T('Not Assigned')}}</td>
                {{pass}}
                <td><b>{{=T('Rol Student')}}</b></td>
                {{for t1 in practice:}}
                    <td>{{=str(t1.auth_user.first_name)}} {{=str(t1.auth_user.last_name)}}</td>
                    <br>
                {{pass}}
            </tr>
        </table>
        {{totalColumnsTable=0}}
        <table class="table table-bordered">
            <THEAD>
                <tr>
                    <td bgcolor="#E6E6E6">
                        {{totalColumnsTable=totalColumnsTable+1}}
                        <b>
                            {{=T('Carnet')}}
                            <br>
                            &nbsp;
                        </b>
                    </td>
                    {{posVCC=0}}
                    {{if request.vars['type'] == 'class':}}
                        {{for category in CourseCategory:}}
                            {{if category.category.category!="Laboratorio":}}
                                {{for c in CourseActivities[posVCC]:}}
                                <td bgcolor="#E6E6E6" class="rcat{{=category.category}}" style="display:none;">
                                    {{totalColumnsTable=totalColumnsTable+1}}
                                    <center>
                                        <b>
                                            {{=str(c.name)}}
                                            <br>
                                            &nbsp;
                                        </b>
                                    </center>
                                </td>
                                {{pass}}
                                <td bgcolor="#E6E6E6">
                                    {{totalColumnsTable=totalColumnsTable+1}}
                                    <center>
                                        <b>
                                            <a id="btV_{{=str(category.category)}}" style="cursor:pointer;" onclick="visible_activities_gr('{{=str(category.category)}}');">
                                                {{=str(category.category.category)}}
                                                <br>
                                                {{=str(category.grade)}} pts
                                            </a>
                                            <a id="btnNV_{{=str(category.category)}}" style="cursor:pointer; display:none;" onclick="no_visible_activities_gr('{{=str(category.category)}}');">
                                                {{=str(category.category.category)}}
                                                <br>
                                                {{=str(category.grade)}} pts
                                            </a>
                                        </b>
                                    </center>
                                </td>
                                {{posVCC=posVCC+1}}
                            {{pass}}
                        {{pass}}
                    {{else:}}
                        {{for category in LabCategory:}}
                            {{if category.category.category!="Laboratorio":}}
                                {{for c in LabActivities[posVCC]:}}
                                <td bgcolor="#E6E6E6" class="rcat{{=str(category.category)}}" style="display:none;">
                                    {{totalColumnsTable=totalColumnsTable+1}}
                                    <center>
                                        <b>
                                            {{=str(c.name)}}
                                            <br>
                                            &nbsp;
                                        </b>
                                    </center>
                                </td>
                                {{pass}}
                                <td bgcolor="#E6E6E6">
                                    {{totalColumnsTable=totalColumnsTable+1}}
                                    <center>
                                        <b>
                                            <a id="btV_{{=str(category.category)}}" style="cursor:pointer;" onclick="visible_activities_gr('{{=str(category.category)}}');">
                                                {{=str(category.category.category)}}
                                                <br>
                                                {{=str(category.grade)}} pts
                                            </a>
                                            <a id="btnNV_{{=str(category.category)}}" style="cursor:pointer; display:none;" onclick="no_visible_activities_gr('{{=str(category.category)}}');">
                                                {{=str(category.category.category)}}
                                                <br>
                                                {{=str(category.grade)}} pts
                                            </a>
                                        </b>
                                    </center>
                                </td>
                                {{posVCC=posVCC+1}}
                            {{pass}}
                        {{pass}}
                    {{pass}}
                    {{if request.vars['type'] == 'class' and existLab==True:}}
                        <td bgcolor="#E6E6E6">
                            {{totalColumnsTable=totalColumnsTable+1}}
                            <center>
                                <b>
                                    {{=T('Laboratory')}}
                                    <br>
                                    {{=str(totalLab)}} pts
                                </b>
                            </center>
                        </td>
                    {{pass}}
                    {{if request.vars['type'] == 'class' and requirement is not None:}}
                        <td bgcolor="#E6E6E6">
                            {{totalColumnsTable=totalColumnsTable+1}}
                            <center>
                                <b>
                                    {{#T('Course Requeriment')}}
                                    
                                    {{=requirement.name}}
                                </b>
                            </center>
                        </td>
                    {{pass}}
                    <td bgcolor="DarkBlue">
                        {{totalColumnsTable=totalColumnsTable+1}}
                        <center>
                            <b>
                                <font Color="White">
                                    {{=T('Final Grade')}}
                                    <br>
                                    100 pts
                                </font>
                            </b>
                        </center>
                    </td>
                </tr>
            </THEAD>
            <TBODY>
                {{for t1 in students:}}
                    {{if request.vars['type'] == 'class':}}
                        <tr>
                            <td>{{=t1.carnet.carnet}}</td>

                            <!--Position in the vector of activities-->
                            {{posVCC=0}}
                            <!--Vars to the control of grade of the student-->
                            {{totalCategory=float(0)}}
                            {{totalActivities=0}}
                            {{totalCarry=float(0)}}
                            <!--****************************************FILL THE GRADES OF THE STUDENT****************************************-->
                            <!--COURSE ACTIVITIES-->
                            {{for category in CourseCategory:}}
                                {{if category.category.category!="Laboratorio":}}
                                    {{totalCategory=float(0)}}
                                    {{totalActivities=0}}
                                    {{for c in CourseActivities[posVCC]:}}
                                        <td class="rcat{{=str(category.category)}}" style="display:none;" bgcolor="#CEECF5">
                                            <center>
                                                {{studentGrade = db((db.grades.activity==c.id)&(db.grades.academic_assignation==t1.id)).select().first()}}
                                                {{if studentGrade is None:}}
                                                    {{totalCategory=totalCategory+float(0)}}
                                                {{else:}}
                                                    {{if category.specific_grade==True:}}
                                                        {{=studentGrade.grade}}
                                                        {{totalCategory=totalCategory+float((studentGrade.grade*c.grade)/100)}}
                                                    {{else:}}
                                                        {{=studentGrade.grade}}
                                                        {{totalCategory=totalCategory+float(studentGrade.grade)}}
                                                    {{pass}}
                                                {{pass}}
                                            </center>
                                        </td>
                                        {{totalActivities=totalActivities+1}}
                                    {{pass}}
                                    <td>
                                        <center>
                                        {{if category.specific_grade==True:}}
                                            {{checkGrade = float((totalCategory*float(100))/float(category.grade))}}
                                            {{if checkGrade < float(controlP.min_average):}}
                                                <FONT COLOR="Red">
                                            {{elif checkGrade>=float(controlP.min_average) and checkGrade <= float(controlP.max_average):}}
                                                <FONT COLOR="#5E610B">
                                            {{else:}}
                                                <FONT COLOR="Green">
                                            {{pass}}
                                            <b>
                                            {{=str(round(totalCategory,3))}}
                                            <!--{{#str(totalCategory)}}-->
                                            </b>
                                            </font>
                                        {{else:}}
                                            {{if totalActivities==0:}}
                                                {{totalActivities=1}}
                                            {{pass}}
                                            {{totalActivities=totalActivities*100}}
                                            {{totalCategory=float((totalCategory*float(category.grade))/float(totalActivities))}}
                                            {{checkGrade = float((totalCategory*float(100))/float(category.grade))}}
                                            {{if checkGrade < float(controlP.min_average):}}
                                                <FONT COLOR="Red">
                                            {{elif checkGrade>=float(controlP.min_average) and checkGrade <= float(controlP.max_average):}}
                                                <FONT COLOR="#5E610B">
                                            {{else:}}
                                                <FONT COLOR="Green">
                                            {{pass}}
                                            <b>
                                                {{=str(round(totalCategory,3))}}
                                            <!--{{#str(totalCategory)}}-->
                                            </b>
                                            </font>
                                        {{pass}}
                                        {{totalCarry=totalCarry+totalCategory}}
                                        </center>
                                    </td>
                                    {{posVCC=posVCC+1}}
                                {{pass}}
                            {{pass}}
                            {{if request.vars['type'] == 'class' and existLab==True:}}
                                <td>
                                    <center>
                                        {{totalCategory=float(0)}}
                                        {{isValidate=False}}
                                        <!--Revalidation of laboratory-->
                                        {{for validate in validateLaboratory:}}
                                            {{if validate.carnet==t1.carnet:}}
                                                {{isValidate=True}}
                                                {{totalCategory=float((validate.grade*totalLab)/100)}}
                                            {{pass}}
                                        {{pass}}


                                        <!--Doesnt has a revalidation-->
                                        {{if isValidate==False:}}
                                            <!--Position in the vector of activities-->
                                            {{posVCC_Lab=0}}
                                            <!--Vars to the control of grade of the student-->
                                            {{totalCategory_Lab=float(0)}}
                                            {{totalActivities_Lab=0}}
                                            {{totalCarry_Lab=float(0)}}

                                            <!--****************************************FILL THE GRADES OF THE STUDENT****************************************-->
                                            <!--LAB ACTIVITIES-->
                                            {{for category_Lab in LabCategory:}}
                                                {{totalCategory_Lab=float(0)}}
                                                {{totalActivities_Lab=0}}
                                                {{for c_Lab in LabActivities[posVCC_Lab]:}}
                                                            {{studentGrade = db((db.grades.activity==c_Lab.id)&(db.grades.academic_assignation==t1.id)).select().first()}}
                                                            {{if studentGrade is None:}}
                                                                {{totalCategory_Lab=totalCategory_Lab+float(0)}}
                                                            {{else:}}
                                                                {{if category_Lab.specific_grade==True:}}
                                                                    {{totalCategory_Lab=totalCategory_Lab+float((studentGrade.grade*c_Lab.grade)/100)}}
                                                                {{else:}}
                                                                    {{totalCategory_Lab=totalCategory_Lab+float(studentGrade.grade)}}
                                                                {{pass}}
                                                            {{pass}}
                                                    {{totalActivities_Lab=totalActivities_Lab+1}}
                                                {{pass}}
                                                

                                                    {{if category_Lab.specific_grade==False:}}
                                                        {{if totalActivities_Lab==0:}}
                                                            {{totalActivities_Lab=1}}
                                                        {{pass}}
                                                        {{totalActivities_Lab=totalActivities_Lab*100}}
                                                        {{totalCategory_Lab=float((totalCategory_Lab*float(category_Lab.grade))/float(totalActivities_Lab))}}
                                                    {{pass}}
                                                    {{totalCarry_Lab=totalCarry_Lab+totalCategory_Lab}}
                                                {{posVCC_Lab=posVCC_Lab+1}}
                                            {{pass}}
                                            {{totalCategory=float((totalCarry_Lab*totalLab)/100)}}
                                        {{pass}}


                                        <!--Show grade of laboratory-->
                                        {{checkGrade = float((totalCategory*float(100))/float(totalLab))}}
                                        {{if checkGrade < float(controlP.min_average):}}
                                            <FONT COLOR="Red">
                                        {{elif checkGrade>=float(controlP.min_average) and checkGrade <= float(controlP.max_average):}}
                                            <FONT COLOR="#5E610B">
                                        {{else:}}
                                            <FONT COLOR="Green">
                                        {{pass}}
                                        <b>
                                        <!--{{#str(totalCategory)}}-->
                                        {{=str(round(totalCategory,3))}}
                                        </b>
                                        </font>
                                        <!--Plus the laboratory to the carry-->
                                        {{totalCarry=totalCarry+totalCategory}}
                                    </center>
                                </td>
                            {{pass}}
                            {{if request.vars['type'] == 'class' and requirement is not None:}}
                                <td width="10px" bgcolor="#F2F5A9">
                                    <center>
                                        <b>
                                            {{if db((db.course_requirement_student.carnet==t1.carnet)&(db.course_requirement_student.requirement==requirement.id)).select().first() is not None:}}
                                                <i class="icon-ok"></i>
                                            {{pass}}
                                        </b>
                                    </center>
                                </td>
                            {{pass}}
                            <td>
                                <center>
                                    {{if request.vars['type'] == 'class' and existLab==True:}}
                                        {{if request.vars['type'] == 'class' and requirement is None:}}
                                            {{if totalCategory>=float((61*totalLab)/100):}}
                                                {{if round(totalCarry,0) < float(controlP.min_average):}}
                                                    <span class="label label-important">
                                                {{elif round(totalCarry,0)>=float(controlP.min_average) and round(totalCarry,0) <= float(controlP.max_average):}}
                                                    <span class="label label-warning">
                                                {{else:}}
                                                    <span class="label label-success">
                                                {{pass}}
                                                {{=str(int(round(totalCarry,0)))}}
                                                </span>
                                            {{else:}}
                                                <span class="label label-inverse">
                                                    {{=str(int(round(totalCarry,0)))}}
                                                </span>
                                            {{pass}}
                                        {{else:}}
                                            {{if db((db.course_requirement_student.carnet==t1.carnet)&(db.course_requirement_student.requirement==requirement.id)).select().first() is not None:}}
                                                {{if totalCategory>=float((61*totalLab)/100):}}
                                                    {{if round(totalCarry,0) < float(controlP.min_average):}}
                                                        <span class="label label-important">
                                                    {{elif round(totalCarry,0)>=float(controlP.min_average) and round(totalCarry,0) <= float(controlP.max_average):}}
                                                        <span class="label label-warning">
                                                    {{else:}}
                                                        <span class="label label-success">
                                                    {{pass}}
                                                    {{=str(int(round(totalCarry,0)))}}
                                                    </span>
                                                {{else:}}
                                                    <span class="label label-inverse">
                                                        {{=str(int(round(totalCarry,0)))}}
                                                    </span>
                                                {{pass}}
                                            {{else:}}
                                                <span class="label label-inverse">
                                                    {{=str(int(round(totalCarry,0)))}}
                                                </span>
                                            {{pass}}
                                        {{pass}}
                                    {{else:}}
                                        {{if request.vars['type'] == 'class' and requirement is None:}}
                                            {{if round(totalCarry,0) < float(controlP.min_average):}}
                                                <span class="label label-important">
                                            {{elif round(totalCarry,0)>=float(controlP.min_average) and round(totalCarry,0) <= float(controlP.max_average):}}
                                                <span class="label label-warning">
                                            {{else:}}
                                                <span class="label label-success">
                                            {{pass}}
                                            {{=str(int(round(totalCarry,0)))}}
                                            </span>
                                        {{else:}}
                                            {{if db((db.course_requirement_student.carnet==t1.carnet)&(db.course_requirement_student.requirement==requirement.id)).select().first() is not None:}}
                                                {{if round(totalCarry,0) < float(controlP.min_average):}}
                                                    <span class="label label-important">
                                                {{elif round(totalCarry,0)>=float(controlP.min_average) and round(totalCarry,0) <= float(controlP.max_average):}}
                                                    <span class="label label-warning">
                                                {{else:}}
                                                    <span class="label label-success">
                                                {{pass}}
                                                {{=str(int(round(totalCarry,0)))}}
                                                </span>
                                            {{else:}}
                                                <span class="label label-inverse">
                                                    {{=str(int(round(totalCarry,0)))}}
                                                </span>
                                            {{pass}}
                                        {{pass}}
                                    {{pass}}
                                </center>
                            </td>
                        </tr>
                        {{posVCC=0}}
                        {{totalCategory=float(0)}}
                        {{totalActivities=0}}
                        {{totalCarry=float(0)}}
                    {{else:}}
                        <tr>
                            <td>{{=t1.carnet.carnet}}</td>

                            <!--Position in the vector of activities-->
                            {{posVCC=0}}
                            <!--Vars to the control of grade of the student-->
                            {{totalCategory=float(0)}}
                            {{totalActivities=0}}
                            {{totalCarry=float(0)}}
                            <!--****************************************FILL THE GRADES OF THE STUDENT****************************************-->
                            <!--COURSE ACTIVITIES-->
                            {{for category in LabCategory:}}
                                {{totalCategory=float(0)}}
                                {{totalActivities=0}}
                                {{for c in LabActivities[posVCC]:}}
                                    <td class="rcat{{=str(category.category)}}" style="display:none;"  bgcolor="#CEECF5">
                                        <center>
                                            {{studentGrade = db((db.grades.activity==c.id)&(db.grades.academic_assignation==t1.id)).select().first()}}
                                            {{if studentGrade is None:}}
                                                {{totalCategory=totalCategory+float(0)}}
                                            {{else:}}
                                                {{if category.specific_grade==True:}}
                                                    {{=studentGrade.grade}}
                                                    {{totalCategory=totalCategory+float((studentGrade.grade*c.grade)/100)}}
                                                {{else:}}
                                                    {{=studentGrade.grade}}
                                                    {{totalCategory=totalCategory+float(studentGrade.grade)}}
                                                {{pass}}
                                            {{pass}}
                                        </center>
                                    </td>
                                    {{totalActivities=totalActivities+1}}
                                {{pass}}
                                <td>
                                    <center>
                                    {{if category.specific_grade==True:}}
                                        {{checkGrade = float((totalCategory*float(100))/float(category.grade))}}
                                        {{if checkGrade < float(controlP.min_average):}}
                                            <FONT COLOR="Red">
                                        {{elif checkGrade>=float(controlP.min_average) and checkGrade <= float(controlP.max_average):}}
                                            <FONT COLOR="#5E610B">
                                        {{else:}}
                                            <FONT COLOR="Green">
                                        {{pass}}
                                        <b>
                                        <!--{{#str(totalCategory)}}-->
                                        {{=str(round(totalCategory,3))}}
                                        </b>
                                        </font>
                                    {{else:}}
                                        {{if totalActivities==0:}}
                                            {{totalActivities=1}}
                                        {{pass}}
                                        {{totalActivities=totalActivities*100}}
                                        {{totalCategory=float((totalCategory*float(category.grade))/float(totalActivities))}}
                                        {{checkGrade = float((totalCategory*float(100))/float(category.grade))}}
                                        {{if checkGrade < float(controlP.min_average):}}
                                            <FONT COLOR="Red">
                                        {{elif checkGrade>=float(controlP.min_average) and checkGrade <= float(controlP.max_average):}}
                                            <FONT COLOR="#5E610B">
                                        {{else:}}
                                            <FONT COLOR="Green">
                                        {{pass}}
                                        <b>
                                        <!--{{#str(totalCategory)}}-->
                                        {{=str(round(totalCategory,3))}}
                                        </b>
                                        </font>
                                    {{pass}}
                                    {{totalCarry=totalCarry+totalCategory}}
                                    </center>
                                </td>
                                {{posVCC=posVCC+1}}
                            {{pass}}
                            <td>
                                <center>
                                    {{if totalCarry < float(controlP.min_average):}}
                                        <span class="label label-important">
                                    {{elif totalCarry>=float(controlP.min_average) and totalCarry <= float(controlP.max_average):}}
                                        <span class="label label-warning">
                                    {{else:}}
                                        <span class="label label-success">
                                    {{pass}}
                                    {{=str(int(round(totalCarry,0)))}}
                                    </span>
                                </center>
                            </td>
                        </tr>
                        {{posVCC=0}}
                        {{totalCategory=float(0)}}
                        {{totalActivities=0}}
                        {{totalCarry=float(0)}}
                    {{pass}}
                {{pass}}
            </TBODY>
            <TFOOT>
                <tr>
                    <td colspan="{{=totalColumnsTable}}">
                        <center>
                            <table class="table table-striped table-bordered">
                                <tr>
                                    <td>
                                        <span class="label label-success">&nbsp;&nbsp;&nbsp;</span>&nbsp;<b>{{=T('Notes above average')}} </b>
                                    </td>
                                    
                                    <td>
                                        <span class="label label-warning">&nbsp;&nbsp;&nbsp;</span>&nbsp;<b>{{=T('Notes on the average')}} </b>
                                    </td>
                                    
                                    <td>
                                        <span class="label label-important">&nbsp;&nbsp;&nbsp;</span>&nbsp;<b>{{=T('Notes Below Average')}}</b>
                                    </td>

                                    {{if request.vars['type'] == 'class':}}
                                    <td>
                                        <span class="label label-inverse">&nbsp;&nbsp;&nbsp;</span>&nbsp;<b>{{=T('Laboratory lost or Missing requirement')}}</b>
                                        <br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="icon-flag"></i><font color="red">{{=T('Only applies to final mark')}}</font>
                                    </td>
                                    {{pass}}
                                </tr>
                            </table>
                        </center>
                    </td>
                </tr>
            </TFOOT>
        </table>
    </div>
</div>

<script type="text/javascript">
    function no_visible_activities_gr(var_name){
        {{if request.vars['type'] == 'class':}}
            {{for category in CourseCategory:}}
                {{if category.category.category!="Laboratorio":}}
                    if (var_name=="{{=str(category.category)}}"){
                        $("#btnNV_{{=str(category.category)}}").css("display", "none");
                        $("#btV_{{=str(category.category)}}").css("display", "");
                        $(".rcat{{=str(category.category)}}").css("display", "none");
                    }
                {{pass}}
            {{pass}}    
        {{else:}}
            {{for category in LabCategory:}}
                if (var_name=="{{=str(category.category)}}"){
                    $("#btnNV_{{=str(category.category)}}").css("display", "none");
                    $("#btV_{{=str(category.category)}}").css("display", "");
                    $(".rcat{{=str(category.category)}}").css("display", "none");
                }
            {{pass}}
        {{pass}}
    }

    function visible_activities_gr(var_name){
        {{if request.vars['type'] == 'class':}}
            {{for category in CourseCategory:}}
                {{if category.category.category!="Laboratorio":}}
                    if (var_name=="{{=str(category.category)}}"){
                        $("#btnNV_{{=str(category.category)}}").css("display", "");
                        $("#btV_{{=str(category.category)}}").css("display", "none");
                        $(".rcat{{=str(category.category)}}").css("display", "");
                    }
                {{pass}}
            {{pass}}    
        {{else:}}
            {{for category in LabCategory:}}
                if (var_name=="{{=str(category.category)}}"){
                    $("#btnNV_{{=str(category.category)}}").css("display", "");
                    $("#btV_{{=str(category.category)}}").css("display", "none");
                    $(".rcat{{=str(category.category)}}").css("display", "");
                }
            {{pass}}
        {{pass}}
    }

    function click_botton(){
        {{#URL(vars=dict(project = project.id, period = year.id, list='True', type=request.vars['type']))}}
        var r = confirm("{{=T('After generating the file will no longer be allowed to make changes within the course and the lab. Are you sure you want to continue?')}}");
        if (r == true) {
            window.location.href = "{{=URL(vars=dict(project = project.id, period = year.id, list='False', type=request.vars['type']))}}";
        }
    }
</script>