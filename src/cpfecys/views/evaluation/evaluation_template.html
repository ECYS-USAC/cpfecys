{{extend 'template.html'}}
{{actual_template = None}}

<table>
	<tr>
		<td >
			<div class="accordion" id="option">
				<div class="accordion-group">
					<div class="accordion-heading">
						<div class="row-fluid">
							<a class="accordion-toggle" style="white-space:nowrap;" onclick="click_template_div();">
								<span class="span6">
									<div>
										<strong>{{=T('Templates')}}</strong>
									</div>
								</span>
							</a>
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<div class="row-fluid">
							<a class="accordion-toggle" style="white-space:nowrap;" onclick="click_new_template();">
								<span class="span6">
									<div>
										<strong>{{=T('Create new template')}}</strong>
									</div>
								</span>
							</a>
						</div>
					</div>
				</div>
				<script>
					function  click_new_template(){						
						$("#new_template").show(500);
						$("#template_div").hide(500);
						$("#form_answer_type_create").hide(500);
						$("#form_question_type_create").hide(500);
						$("#form_answer_create").hide(500);						
						$("#form_evaluation_type_create").hide(500);
					}
					function  click_form_answer_type_create(){						
						$("#new_template").hide(500);
						$("#template_div").hide(500);
						$("#form_answer_type_create").show(500);
						$("#form_question_type_create").hide(500);
						$("#form_answer_create").hide(500);						
						$("#form_evaluation_type_create").hide(500);
					}
					function  click_form_question_type_create(){						
						$("#new_template").hide(500);
						$("#template_div").hide(500);
						$("#form_answer_type_create").hide(500);
						$("#form_question_type_create").show(500);
						$("#form_answer_create").hide(500);						
						$("#form_evaluation_type_create").hide(500);
					}
					function  click_form_answer_create(){						
						$("#new_template").hide(500);
						$("#template_div").hide(500);
						$("#form_answer_type_create").hide(500);
						$("#form_question_type_create").hide(500);
						$("#form_answer_create").show(500);						
						$("#form_evaluation_type_create").hide(500);
					}
					function  click_template_div(){						
						$("#new_template").hide(500);
						$("#template_div").show(500);
						$("#form_answer_type_create").hide(500);
						$("#form_question_type_create").hide(500);
						$("#form_answer_create").hide(500);
						$("#form_evaluation_type_create").hide(500);
					}
					function  click_form_evaluation_type_create(){						
						$("#new_template").hide(500);
						$("#template_div").hide(500);
						$("#form_answer_type_create").hide(500);
						$("#form_question_type_create").hide(500);
						$("#form_answer_create").hide(500);
						$("#form_evaluation_type_create").show(500);
					}
				</script>
				<div class="accordion-group">
					<div class="accordion-heading">
						<div class="row-fluid">
							<a class="accordion-toggle" style="white-space:nowrap;"  onclick="click_form_answer_create();">
								<span class="span6">
									<div>
										<strong>{{=T('Create answer')}}</strong>
									</div>
								</span>
							</a>
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<div class="row-fluid">
							<a class="accordion-toggle" style="white-space:nowrap;"  onclick="click_form_answer_type_create();">
								<span class="span6">
									<div>
										<strong>{{=T('Create type answer')}}</strong>
									</div>
								</span>
							</a>
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<div class="row-fluid">
							<a class="accordion-toggle" style="white-space:nowrap;"  onclick="click_form_question_type_create();">
								<span class="span6">
									<div>
										<strong>{{=T('Create type question')}}</strong>
									</div>
								</span>
							</a>
						</div>
					</div>
				</div>
				<div class="accordion-group">
					<div class="accordion-heading">
						<div class="row-fluid">
							<a class="accordion-toggle" style="white-space:nowrap;"  onclick="click_form_evaluation_type_create();">
								<span class="span6">
									<div>
										<strong>{{=T('Create type evaluation')}}</strong>
									</div>
								</span>
							</a>
						</div>
					</div>
				</div>
			</div>

		</td>
	

		<td style="width:100%;">
			<div id= "new_template" class="row-fluid " 
			{{if op_select != '2':}}
				style="display:none;"
			{{pass}}>
				<div class="well span12">
					<center>
						
						<h3>
							{{=T('Create template')}}
						</h3>
					
						{{=form}}
					</center>
				</div>
			</div>
		
	
	
			<div id="form_answer_type_create" class="row-fluid "
			{{if op_select != '4':}}
				style="display:none;"
			{{pass}}>
				<div class="well span12">
					<center>
						<h3>
							{{=T('Create type answer')}}
						</h3>
					{{=form_answer_type_create}}
					</center>
				</div>
			</div>
				
			<div id="form_answer_create" class="row-fluid " 
			{{if op_select != '3':}}
				style="display:none;"
			{{pass}}>
				<div class="well span12">
					<center>
						<h3>
							{{=T('Create answer')}}
						</h3>
					<!--div class="alert" style="width:65%;">
						<div align="left" >
							{{=T('Notice')}}:
							<i>
							{{=T('The sum of the grades for each answer the same type must be 100')}}.
							</i>
						</div>
					</div-->
					{{=form_answer_create}}
					</center>
				</div>
			</div>			

			
			<div id="form_question_type_create" class="row-fluid "
			{{if op_select != '5':}}
				style="display:none;"
			{{pass}}>
				<div class="well span12">
					<center>
						<h3>
							{{=T('Create type question')}}
						</h3>
					{{=form_question_type_create}}
					</center>
				</div>
			</div>

			<div id="form_evaluation_type_create" class="row-fluid "
			{{if op_select != '6':}}
				style="display:none;"
			{{pass}}>
				<div class="well span12">
					<center>
						<h3>
							{{=T('Create type evaluation')}}
						</h3>
					{{=form_evaluation_type_create}}
					</center>
				</div>
			</div>

			<div class="well" id ="template_div"  
			{{if op_select != None:}}
				style="display:none; width:100%;"
			{{else:}}
				style="width:100%;"
			{{pass}}>
				<center>
					<h3>
						{{=T('Templates')}}
					</h3>
				</center>
				<form class="form-inline" action="{{=URL('evaluation','evaluation_template')}}" method='get'>
					<select name="template_id">
					{{for template in evaluation_template_list:}}
						{{if str(template.id) == str(template_id):}}
							{{var_sel="selected='selected'"}}
							{{actual_template=template}}
						{{else:}}
							{{var_sel=''}}
						{{pass}}
					  <option value="{{=template.id}}" title="{{=template.description}}"  {{=var_sel}}>
					  {{=template.name}}
					  </option>
					{{pass}}
					</select>
					<input class="btn" type="submit" value="{{=T('View template')}}">
				</form>	
				{{if actual_template is not None:}}
					<table class="table table-striped table-bordered">
						<tr>
							<td>
								<b>
								{{=T('Name')}}:
								</b>
							</td>
							<td>
								{{=actual_template.name}}
							</td>
							<td>
								<b>
								{{=T('Evaluation type')}}:
								</b>
							</td>
							<td>
								<form class="form-inline" action="{{=URL('evaluation','evaluation_template')}}" method='get'>
									<input name="template_id" type="hidden" value="{{=template_id}}">
									<select name="ev_type">
									{{for ev_type in db(db.evaluation_type).select():}}
										{{if ev_type.id == actual_template.evaluation_type.id:}}
											{{var_sel="selected='selected'"}}
											{{#actual_template=template}}
										{{else:}}
											{{var_sel=''}}
										{{pass}}
									  <option value="{{=ev_type.id}}"   title="{{=ev_type.description}}"  {{=var_sel}}>
									  {{=ev_type.name}}
									  </option>
									{{pass}}
									</select>
									<input class="btn" type="submit" value="{{=T('Update')}}">
								</form>
								
							</td>
						<tr>
						<tr>
							<td colspan="1">
								<b>
								{{=T('Description')}}:
								</b>
							</td>
							<td colspan="3">
								<pre>
{{=actual_template.description}}
								</pre>
							</td>
						<tr>
					</table>
				{{pass}}

				{{if actual_template is not None:}}
					<table>
						<td>
							<table>
								<tr>
							
									<center>
										<h3><small>{{=T('Add question')}}</small></h3>
									</center>
									<div class="well">
										<div id="div_add_question">
										</div>
										<script type="text/javascript">
											$("#div_add_question").load("{{=URL('evaluation','question_template.html',vars=dict(template_id=template_id) )}}");
										</script>
									</div>
								</tr>
								<tr>
							
									<center>
										<h3><small>{{=T('Add to evaluations repository')}}</small></h3>
									</center>
									<div class="well">
										<div class="alert"  >
												            
										    <div align="left">
										    	{{=T('Notice')}}:
										    	<i>
										    	{{=T('After adding the template in the evaluations repository may continue editing the template, however, may not edit or delete the evaluation of the repository')}}.
										    	</i>
										  </div>
										</div>
										<form  method='post'>
											<input name="_formname" type="hidden" value="add_to_history">
											<center>
												{{=T('Name')}}:
												<input tabindex="4" id="hitory_name"  name="hitory_name"  type="text" style="width:220px;">
												<br>
												<input  tabindex="5" class="btn btn-warning" type="submit" title="{{=T('Add to repository')}}" value="{{=T('Add to repository')}}">
											</center>
										</form>
									</div>
								</tr>
							</table>

					</td>
					<td width="100%">
						
						<center>
							<h3><small>{{=T('Template questions')}}</small></h3>
						</center>
						<div id="div_detail_template" class="well">
						</div>
					</td>
				</table>
				{{pass}}
			</div>
				
		</td>
		
	</tr>
</table>